<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="styles.css" id="themedefault">
<link rel="stylesheet" media="(prefers-color-scheme: dark)" href="styles.dark.css" id="themeos">
<link rel="stylesheet" href="" id="themetoggle">
<style>
    @import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap');
</style>
</head>
<body>
<!-- 
=== POPUP STUFF ===============================================================
-->

<div id="popup-editlibrary" class="popup">
    <p class="section_label" style="font-size: 1.3rem"> Personal Song Library</p>
    <img class="popup_close" src="icons/x-circle-fill.svg" onclick="closeEditSongLibraryPopUp()">
    <div id="popup-personal_search_content" class="search_bar_content">
    <ul id="popup-personal_search_results" class="search_results"></ul>
    </div>
    <button class="popup_input" onclick="addSongPopUp()"> Add Song</button>
    <label for="show_personal_songs" class="form_label"> Show Personal Songs in Search
        <input id="show_personal_songs" type="checkbox" checked="checked"> <br>
        </label>
    <div class="tooltip">
      <p class="section_label" style="margin-top:2rem">Uploading/Exporting Your Personal Library</p>
        <span class="tooltiptext" id="personal_library_text"> Your personal library is stored as local history on your browser, which is cleared when your browser history/cache is cleared. <br>
          If you would like to save your personal library, you can download it as JSON file, or upload one.
        </span>
    </div><br>
    <div class="clickable_link" onclick="downloadPersonalLibrary()" style="margin:0"> 
      <img class="icon_button" src="icons/database-down.svg" onclick="downloadPersonalLibrary()" style="display:inline">
      Save Personal Library as a JSON File
    </div>
    <br>
    <div style="margin:0"> 
      <div class="clickable_link" onclick="readJSONDatabase()" style="display:inline-block"> 
        <img class="icon_button" src="icons/database-up.svg" onclick="readJSONDatabase()" style="display:inline-block">
        Upload a Personal Library Database File (JSON) 
      </div>
        <p class="small_label" style="margin:0.1rem">This will replace your current library with the uploaded database</p>
        <input id="database_reader" type="file" style="font-size:0.7rem" class="popup_input" accept=".json">
    </div> 
</div>
<div id="popup-addsong" class="popup">
    <p id="popup-title" class="section_label"> Add Song to Local Library</p>
    <img class="popup_close" src="icons/x-circle-fill.svg" onclick="closeAddSongPopUp()">
        <label for="song_title_input" class="form_label">Title</label>
        <input type="text" id="song_title_input" name="song_title_input" class="popup_input" required>
        <label for="song_author_input" class="form_label">Author</label>
        <input type="text" id="song_author_input" name="song_author_input" class="popup_input" required>
        <label for="song_tempo_input" class="form_label">Tempo</label>
        <select id="song_tempo_input" class="popup_input" required>
            <option value="Fast">Fast</option>
            <option value="Medium">Medium</option>
            <option value="Slow">Slow</option>
            <option value="Intercessory">Intercessory</option>
        </select>
        <label for="song_sheet_input" class="form_label" required>Chord Sheet</label>
        <textarea id="song_sheet_input" class="popup_input" placeholder="Use two blank lines to separate verse/chorus/etc."></textarea>
        <button id="song_input_submit" class="popup_input" onclick="addSongSubmit()">Add Song</button>
</div>
<div id="popup-editlyrics" class="popup">
  <p class="section_label"> Edit Lyrics</p>
  <img class="popup_close" src="icons/x-circle-fill.svg" onclick="closeEditLyricsPopUp()">
  <textarea id="edit_lyrics_input" class="popup_input" placeholder="Use two blank lines to separate verse/chorus/etc."></textarea>
  <button id="edit_lyrics_submit" clsas="popup_input" onclick="editLyrics()"> Submit Changes (Saved Locally Only)</button>
</div>
<div id="popup-background" class="popup-background" onclick="closePopUp()"></div>

<!-- 
=== END POPUP STUFF ===========================================================
-->


<div id="header">
  <div>
    <img id="ssm_icon" src="icons/ssm_icon.png">
    <h1>Worship Set Selector</h1>
  </div>
  <!-- <div class="tooltip"> -->
    <div id="chord_toggle" class="toggle selected" onclick="switchMedia()"
      title="toggle chord/media media">
      Chords 
    </div>
    <div id="media_toggle" class="toggle" onclick="switchMedia()"
      title="toggle chord/media media">
      Media
    </div>
  
  <!--<img class="icon_button" id="media_button" src="icons/projector-fill.svg" 
    onclick="switchMedia()">-->

  <!--
    <span class="tooltiptext tttbottom" id="media_button_text">Switch to media mode</span>
  -->
  </div>
</div>  

<img id="nightmode" src="icons/sun.svg">

<div id="wrapper">
    <div id="side_bar">
        <div id="songs_header">
            <p id="song_list_label" class = "section_label_top">Songs</p>
            <p id="minimize_button_top" class="minimize_button_top" 
              onclick="changeSongsVisibility()" title="Hide song database">
              â€“</p>
        </div>
        <div id="songs_dashboard">
        <div id="search_bar_content" class="search_bar_content">
            <input type="text" placeholder="Search.." id="search_bar" 
              onkeyup="filterFunction()">
            <ul id="search_results" class="search_results"></ul>
        </div>
        <div id="tempo_dashboard">
            <label id="tempo_label" class="small_label">Tempo:
            <select name="tempo_options" id="tempo_options" 
              onchange="filterFunction()">
                <option value="Any">Any</option>
                <option value="Fast">Fast</option>
                <option value="Medium">Medium</option>
                <option value="Slow">Slow</option>
                <option value="Intercessory">Intercessory</option>
            </select>
            </label>
            <!-- <div class="tooltip"> -->
            <img class="icon_button" style="width:0.9rem" id="addToDatabase" 
               src="icons/upload.svg" onclick="editSongLibraryPopUp()"
               title="Add/remove songs from your personal library">
                <!--
                <span class="tooltiptext tttright">
                    Add/remove songs from your personal library
                </span>
            </div>
                -->
        </div>
        </div>
        <p id="set_list_label" class = "section_label">Set List</p>
        <div id="set_list" tabindex="0">
            <ul id="set_list_items"></ul>
        </div>
        <p id="export_label" class = "section_label"> Export Set</p>

        <select name="export_select" id="export_select">
            <option value="pdf">PDF</option>
            <option value="ppt">Powerpoint (Media Slides)</option>
            <option value="text">Plain Text</option>
        </select>
        <button id="export_button">Download</button>
    </div>          

    <div id="transition_display">
        <div class="dashboard">
          <span class="dashboard_button" onclick="">Add to Set</span>
        </div>
        <div id='fakepresentation'></div>
    </div>

    <div id="chord_display" style="display:block">
        <div class="dashboard">
            <span class="dashboard_button" onclick="addSongToSet()">
              Add to Set
            </span>
            <div id="transpose_dashboard">
                <div id="key_label" class="key_label"> Current Key: </div>
                <div id="key_display" class="key_display">?</div>
                <img id="button_plus" src="icons/caret-up-fill.svg" 
                  class="transpose_button" title="Increase key">
                <img id="button_minus" src="icons/caret-down-fill.svg" 
                  class="transpose_button" title="Decrease key">
            </div>
        </div>
        <textarea id="text_entry" placeholder="Chord Sheets Here"></textarea>
    </div>
    

    <div id="media_display" style="display:none">

      <div id="presentation_wrapper">
        <div class="dashboard">
          <span class="dashboard_button" onclick="addSongToSet()">
            Add to Set
          </span>
          <div style="display: inline-block">
            <img class="media_dashboard_button" 
              id="blackscreen_button" 
              src="icons/back.svg" onclick="blackScreen()" 
              title="Toggle black screen">
            <img class="media_dashboard_button" id="cast_button" 
              src="icons/cast.svg" 
              onclick="presentMedia()" title="Fullscreen">
          </div>
        </div>
        <div id="currpresentation" class="presentation">
          <span id="currpresentation_text">
            <!--   Choose a song on <br> the left to begin -->
          </span>
          <div id="nextpresentation" class="presentation" title="Next Slide">
            <span id="nextpresentation_text">
              Next slide goes here
              <!--   Choose a song on <br> the left to begin -->
            </span>
          </div>
        </div>
      </div>

      <div id="right_side_bar">
        <div id="lyrics_header">
          <div></div>
          <div id="lyric_list_label" class="section_label_top">Lyrics</div>
          <img id="edit_lyrics_button" class="icon_button" id="edit_lyrics" 
            src="icons/pencil-square.svg" onclick="editLyricsPopUp()"
            title="Edit lyrics">
        </div>
        <div id="lyrics_dashboard" tabindex="0">
          <ul id="lyric_results" class="search_results"></ul>
        </div>
      </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/pptxgenjs@3.11.0/dist/pptxgen.bundle.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script src="global_variables.js"></script>
<script src="transposer.js"></script>
<script src="searchbar.js"></script>
<script src="setlist.js"></script>
<script src="personal_library.js"></script>
<script src="nightmode.js"></script>
<script type="module" src="SourceCodePro-Regular-normal.js"></script>
<script src="media.js"></script>
<script src="functions.js"></script>
<script src="lyriclist.js"></script>
<script src="keystrokes.js"></script>
<script src="database_UG.js"></script>
<script src="database_load.js"></script>
<script type="module" src="exportset.js"></script>

</body>
</html>

